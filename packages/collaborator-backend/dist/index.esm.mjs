import i from"express";import*as n from"node:http";import{internalIpV4 as p}from"internal-ip";import{WebSocketServer as a}from"ws";async function d(){return{port:1239,wsPort:11239,host:await p()}}async function f(){let e=i(),s=await d(),o=n.createServer(e),c=new a({port:8080});o.listen(s.port,()=>{let r=o.address();if(l(r))console.log(`Server started on port ${r.address}:${r.port} :)`);else throw new Error("Trouble starting websocket server!")}),c.on("connection",(r,u)=>{r.on("message",t=>{console.log("received: %s",t),r.send(`Hello, you sent -> ${t}`)})})}f().then().catch(e=>{console.error("SERVER ERROR",e)});function l(e){return!!e}
